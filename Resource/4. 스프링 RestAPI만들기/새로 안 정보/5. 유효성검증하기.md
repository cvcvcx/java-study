---
날짜: 2024-01-05
주제: Spring Boot REST API
설명: 서버 요청 객체의 유효성을 검증한다
---
> [!NOTE] 사용 시기
>  - 사용자의 요청이 이상하게 올 때, 
>    그 요청이 제대로 된 요청인지 아닌지 판별해서 예외처리를 해야한다.


> [!tip] 사용방법
> - spring-boot-starter-validation를 build.gradle에 추가하고
> - @Vaild 어노테이션을 사용해서 요청을 검증한다.
> - @Size @Past 와 같은 어노테이션으로 검증 기준을 정할 수 있다.
> - 또한, 이전에 만든 예외처리 정보 핸들러([[4. 예외처리 정보 커스텀하기]]참조)를 통해 
>   구체적인 메세지를 사용자에게 넘겨서, 조건을 알려줄 수 있다.


# 🚀 구체적인 사용방법
### 1. spring-boot-starter-validation 추가
 ```gradle
 // build.gradle
 implementation 'org.springframework.boot:spring-boot-starter-validation'
 ```

### 2. 매개변수에 @Valid 어노테이션 추가
```java
@PostMapping("/users")  
public ResponseEntity<User> createUser(@Valid @RequestBody User user){  
    User save = service.save(user);  
    URI location =  
            ServletUriComponentsBuilder.fromCurrentRequest()  
                                         .path("/{id}")  
                                         .buildAndExpand(save.getId())  
                                         .toUri();  
    return ResponseEntity.created(location).build();  
}
```

### 3. User객체에 조건 기준 어노테이션 추가
```java
@Getter  
@Setter  
@NoArgsConstructor  
@AllArgsConstructor  
@ToString  
public class User {  
    private Integer id;  
    //최소 2자이상은 입력해야한다.
    @Size(min = 2)  
    private String name;  
    // 현재일 기준 과거만 선택 가능하다
    @Past  
    private LocalDate birthDate;  
}
```

> [!warning] 주의 사항

